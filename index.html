<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ ÙØ±ÙŠ ÙØ§ÙŠØ± Ù‚Ø¯ÙŠÙ…</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
* { box-sizing:border-box; margin:0; padding:0; font-family:'Cairo',sans-serif; }
body { background: linear-gradient(135deg,#0f0f0f,#1c1c1c); color:#fff; display:flex; justify-content:center; align-items:center; min-height:100vh; }
.container { background:#111; padding:40px 30px; border-radius:20px; box-shadow:0 0 25px #00ff88; width:100%; max-width:500px; }
h2 { text-align:center; color:#00ff88; margin-bottom:10px; }
#remainingAttempts { text-align:center; color:#ffcc00; font-weight:bold; margin-bottom:25px; font-size:16px; text-shadow:0 0 8px #ffcc00,0 0 12px #00ff88; }
label { display:block; margin-top:15px; margin-bottom:5px; font-weight:600; }
input, select { width:100%; padding:12px; border:none; border-radius:10px; font-size:16px; margin-bottom:5px; outline:none; transition:0.3s; background-color:#1c1c1c; color:#fff; }
input::placeholder, select::placeholder { color:#888; }
input:focus, select:focus { box-shadow:0 0 8px #00ff88; transform:scale(1.02); }
button { width:100%; padding:12px; background-color:#00ff88; border:none; border-radius:10px; font-size:18px; font-weight:bold; cursor:pointer; color:#000; margin-top:20px; transition:0.3s; }
button:disabled { background-color:#444; cursor:not-allowed; color:#999; }
.error { color:red; font-size:13px; margin-top:5px; display:none; min-height:16px; }
@media(max-width:600px){ .container{padding:25px;} input,select,button{font-size:14px;padding:10px;} }
</style>
</head>
<body>
<div class="container" id="formContainer">
<h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ ÙØ±ÙŠ ÙØ§ÙŠØ± Ù‚Ø¯ÙŠÙ…</h2>
<div id="remainingAttempts">Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø§Ù„ÙŠÙˆÙ…: <span id="attemptsLeft">2</span></div>

<label>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</label>
<input type="text" id="username" placeholder="Ù…Ø«Ø§Ù„: ProPlayer123">
<div id="usernameError" class="error"></div>

<label>Ù…Ø³ØªÙˆÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨ (1 - 70):</label>
<input type="number" id="level" min="1" max="70">
<div id="levelError" class="error"></div>

<label>Ø¹Ø¯Ø¯ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± (0-100000):</label>
<input type="number" id="diamonds" min="0" max="100000">
<div id="diamondsError" class="error"></div>

<label>Ø¹Ø¯Ø¯ Ø§Ù„Ø°Ù‡Ø¨ (0-100000):</label>
<input type="number" id="coins" min="0" max="100000">
<div id="coinsError" class="error"></div>

<label>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨:</label>
<select id="accountType">
<option value="">Ø§Ø®ØªØ±</option>
<option value="gmail">Ø¬ÙŠÙ…ÙŠÙ„</option>
<option value="facebook">ÙÙŠØ³ Ø¨ÙˆÙƒ</option>
</select>
<div id="accountTypeError" class="error"></div>

<label>Ø§Ù„Ø¬Ù†Ø³:</label>
<select id="gender">
<option value="">Ø§Ø®ØªØ±</option>
<option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
<option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
</select>
<div id="genderError" class="error"></div>

<button id="generateBtn" disabled>ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¢Ù†</button>
</div>

<script>
const username = document.getElementById('username');
const level = document.getElementById('level');
const diamonds = document.getElementById('diamonds');
const coins = document.getElementById('coins');
const accountType = document.getElementById('accountType');
const gender = document.getElementById('gender');
const generateBtn = document.getElementById('generateBtn');
const usernameError = document.getElementById('usernameError');
const levelError = document.getElementById('levelError');
const diamondsError = document.getElementById('diamondsError');
const coinsError = document.getElementById('coinsError');
const attemptsLeftSpan = document.getElementById('attemptsLeft');

const maxAttempts = 2;
let now = new Date().getTime();
let attempts = JSON.parse(localStorage.getItem('attempts')) || { lastReset: now, count: 0 };

if(now - attempts.lastReset >= 24*60*60*1000){
    attempts = { lastReset: now, count: 0 };
    localStorage.setItem('attempts', JSON.stringify(attempts));
}

function updateAttemptsLeft(){
    const left = maxAttempts - attempts.count;
    attemptsLeftSpan.textContent = left >= 0 ? left : 0;
}
updateAttemptsLeft();

function showCooldownMessage(endTime){
    document.getElementById('formContainer').innerHTML = `
      <h2>ğŸš« Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ°Øª Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…</h2>
      <p style="text-align:center; color:#ffcc00; margin-top:10px;">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ:</p>
      <h3 id="countdown" style="text-align:center; font-size:24px; margin-top:20px; color:#00ff88;"></h3>
    `;
    function updateCountdown(){
        const now = new Date().getTime();
        const distance = new Date(endTime).getTime() - now;
        if(distance <= 0){
            clearInterval(timerInterval);
            attempts = { lastReset: new Date().getTime(), count: 0 };
            localStorage.setItem('attempts', JSON.stringify(attempts));
            location.reload();
            return;
        }
        const hours = Math.floor(distance/(1000*60*60));
        const minutes = Math.floor((distance % (1000*60*60))/(1000*60));
        const seconds = Math.floor((distance % (1000*60))/1000);
        document.getElementById('countdown').textContent =
            `${hours.toString().padStart(2,'0')} : ${minutes.toString().padStart(2,'0')} : ${seconds.toString().padStart(2,'0')}`;
    }
    updateCountdown();
    const timerInterval = setInterval(updateCountdown,1000);
}

if(attempts.count >= maxAttempts){
    const endTime = new Date(attempts.lastReset + 24*60*60*1000);
    showCooldownMessage(endTime);
} else {

    function validateForm(){
        let valid = true;
        const nameVal = username.value.trim();
        const allowedPattern = /^[A-Za-z0-9]+$/;

        if(nameVal===''){ usernameError.style.display='none'; valid=false; } 
        else if(!allowedPattern.test(nameVal) || nameVal.length < 6 || (nameVal.match(/\d/g)||[]).length < 3){ 
            usernameError.textContent='Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ ÙˆÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ùˆ3 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„'; 
            usernameError.style.display='block'; valid=false; 
        } else usernameError.style.display='none';

        if(level.value===''){ levelError.style.display='none'; valid=false; } 
        else if(!/^\d+$/.test(level.value) || level.value<1 || level.value>70){ 
            levelError.textContent='ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ù…Ø³ØªÙˆÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ù† 1 Ø¥Ù„Ù‰ 70 ÙƒØ£Ù‚ØµÙŠ Ø­Ø¯'; 
            levelError.style.display='block'; valid=false; 
        } else levelError.style.display='none';

        if(diamonds.value===''){ diamondsError.style.display='none'; valid=false; } 
        else if(!/^\d+$/.test(diamonds.value) || diamonds.value<0 || diamonds.value>100000){ 
            diamondsError.textContent='ÙŠØ¬Ø¨ Ø§Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± Ù…Ù† 0 Ø¥Ù„Ù‰ 100 Ø§Ù„Ù ÙƒØ£Ù‚ØµÙŠ Ø­Ø¯'; 
            diamondsError.style.display='block'; valid=false; 
        } else diamondsError.style.display='none';

        if(coins.value===''){ coinsError.style.display='none'; valid=false; } 
        else if(!/^\d+$/.test(coins.value) || coins.value<0 || coins.value>100000){ 
            coinsError.textContent='ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø°Ù‡Ø¨ Ù…Ù† 0 Ø¥Ù„Ù‰ 100 Ø§Ù„Ù ÙƒØ£Ù‚ØµÙŠ Ø­Ø¯'; 
            coinsError.style.display='block'; valid=false; 
        } else coinsError.style.display='none';

        if(accountType.value===''){ valid=false; }
        if(gender.value===''){ valid=false; }

        generateBtn.disabled = !valid;
    }

    function generatePassword(len){
        const chars='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        let pw='';
        for(let i=0;i<len;i++){ pw+=chars.charAt(Math.floor(Math.random()*chars.length)); }
        return pw;
    }

    function generateRandomEmail(usernameVal,type){
        const randomNum = Math.floor(Math.random()*10);
        let domain='@gmail.com';
        if(type==='facebook'){ domain = Math.random()<0.5 ? '@gmail.com':'@yahoo.com'; }
        return usernameVal.replace(/\s+/g,'').toLowerCase() + randomNum + domain;
    }

    generateBtn.addEventListener('click', ()=>{
        const u = username.value.trim();
        const pw = generatePassword(10);
        const email = generateRandomEmail(u, accountType.value);
        localStorage.setItem('username', u);
        localStorage.setItem('level', level.value);
        localStorage.setItem('diamonds', diamonds.value);
        localStorage.setItem('coins', coins.value);
        localStorage.setItem('accountType', accountType.options[accountType.selectedIndex].text);
        localStorage.setItem('gender', gender.options[gender.selectedIndex].text);
        localStorage.setItem('email', email);
        localStorage.setItem('password', pw);

        attempts.count++;
        localStorage.setItem('attempts', JSON.stringify(attempts));
        updateAttemptsLeft();

        // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
        sessionStorage.setItem('allowAccess', 'true');

        let targetLink = '';
        if(attempts.count === 1){
            targetLink = 'account1.html';
        } else if(attempts.count === 2){
            targetLink = 'account2.html';
        }

        window.location.href = targetLink;
    });

    [username,level,diamonds,coins,accountType,gender].forEach(el=>{
        el.addEventListener('input',validateForm);
        el.addEventListener('blur',validateForm);
    });

    window.addEventListener('load',validateForm);

    level.addEventListener('input', ()=>{ level.value = level.value.replace(/\D/g,''); });
    diamonds.addEventListener('input', ()=>{ diamonds.value = diamonds.value.replace(/\D/g,''); });
    coins.addEventListener('input', ()=>{ coins.value = coins.value.replace(/\D/g,''); });

    username.addEventListener('input', ()=>{ username.value = username.value.replace(/[^A-Za-z0-9]/g,''); });

}
</script>
</body>
</html>
